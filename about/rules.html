<!DOCTYPE html>
<html lang="ru" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ì—É—Å–õ–µ–Ω–¥ ‚Äî –ü—Ä–∞–≤–∏–ª–∞</title>
  <link href="/css/style.css" rel="stylesheet" />
</head>
<body>
  <div class="topbar-container">
    <div class="logo">
      <img src="/images/goose-icon.png" alt="–ì—É—Å—å" />
      <span>–ì—É—Å–õ–µ–Ω–¥</span>
    </div>
    <input
      type="text"
      placeholder="–ü–æ–∏—Å–∫..."
      class="search-input"
      aria-label="–ü–æ–∏—Å–∫ –ø–æ —Å–∞–π—Ç—É"
      autocomplete="off"
    />
    <div id="search-results" role="listbox" aria-label="–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞"></div>
  </div>

  <div class="content-wrapper">
    <aside>
      <nav>
        <a href="index.html">üè† –ù–æ–≤–∏—á–∫–∞–º</a>
        <a href="rules.html" class="active">üìú –ü—Ä–∞–≤–∏–ª–∞</a>
        <a href="start.html">üö™ –ù–∞—á–∞—Ç—å –∏–≥—Ä–∞—Ç—å</a>
      </nav>
    </aside>

    <main>
      <h1>–ü—Ä–∞–≤–∏–ª–∞ —Å–µ—Ä–≤–µ—Ä–∞</h1>
      <ul>
        <li>–ó–∞–ø—Ä–µ—â–µ–Ω—ã —á–∏—Ç—ã –∏ –ª—é–±—ã–µ —á–∏—Ç–µ—Ä—Å–∫–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã.</li>
        <li>–û—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è –∏ —Ç–æ–∫—Å–∏—á–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∫–∞—Ä–∞—é—Ç—Å—è –±–∞–Ω–æ–º.</li>
        <li>–ì—Ä–∏—Ñ–µ—Ä—Å—Ç–≤–æ —Å—Ç—Ä–æ–≥–æ –∑–∞–ø—Ä–µ—â–µ–Ω–æ.</li>
        <li>–ó–∞–ø—Ä–µ—â–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∞ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –∏ –≤–Ω—É—Ç—Ä–∏–∏–≥—Ä–æ–≤—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ –∑–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–µ–Ω—å–≥–∏.</li>
        <li>–°–æ–±–ª—é–¥–∞–π—Ç–µ —É–≤–∞–∂–µ–Ω–∏–µ –∫ –¥—Ä—É–≥–∏–º –∏–≥—Ä–æ–∫–∞–º –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏.</li>
      </ul>
      <p>–ù–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª –≤–µ–¥—ë—Ç –∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É.</p>
    </main>

    <aside class="right-sidebar">
      <h2>–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</h2>
      <ul>
        <li><a href="#section1">–ó–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã</a></li>
        <li><a href="#section2">–ü–æ–≤–µ–¥–µ–Ω–∏–µ</a></li>
        <li><a href="#section3">–ù–∞–∫–∞–∑–∞–Ω–∏—è</a></li>
      </ul>
    </aside>
  </div>

  <script>
    const input = document.querySelector('.search-input');
    const results = document.getElementById('search-results');
    let indexData = [];

    fetch('search-index.json')
      .then(res => res.json())
      .then(data => indexData = data)
      .catch(() => {
        results.innerHTML = '<p style="padding:10px;">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–∏—Å–∫–∞</p>';
        results.style.display = 'block';
      });

    input.addEventListener('input', () => {
      const query = input.value.trim().toLowerCase();
      results.innerHTML = '';
      results.style.display = 'none';

      if (query.length < 2) return;

      const matches = indexData.filter(item =>
        item.title.toLowerCase().includes(query) ||
        item.content.toLowerCase().includes(query)
      );

      if (matches.length === 0) {
        results.innerHTML = '<p style="padding:10px;">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p>';
      } else {
        matches.forEach(match => {
          const snippet = match.content.length > 120 ? match.content.slice(0, 120) + '...' : match.content;
          results.innerHTML += `
            <a href="${match.url}" role="option" class="block p-2 hover:bg-gray-800 rounded">
              <strong style="color:#fde047;">${match.title}</strong><br>
              <span style="font-size:0.9rem; color:#ccc;">${snippet}</span>
            </a>
          `;
        });
      }
      results.style.display = 'block';
    });

    document.addEventListener('click', e => {
      if (!results.contains(e.target) && e.target !== input) {
        results.style.display = 'none';
      }
    });
  </script>
</body>
</html>
